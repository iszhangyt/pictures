######### 锚点 start #######

#这里是订阅更新和延迟测试相关的
p: &p {type: http, interval: 3600, health-check: {enable: true, url: https://www.gstatic.com/generate_204, interval: 300}}

use1: &use1
  type: select
  use:
  - provider1

use2: &use2
  type: select
  use:
  - provider2

use3: &use3
  type: select
  use:
  - provider3

use4: &use4
  type: select
  use:
  - provider4

use5: &use5
  type: select
  use:
  - provider5


######### 锚点 end #######


# url 里填写自己的订阅,名称不能重复
proxy-providers: 
  provider1: 
    <<: *p
    path: ./proxy/provider1.yaml
    url: "https://get-d.haitasub.site/api/v1/client/subscribe?token=202dffbfb8b4d8092305f5f087cd17ad"

  provider2:
    <<: *p
    path: ./proxy/provider2.yaml
    url: "https://jp.taishan1.pro/api/v1/client/subscribe?token=9acb0b89bc9c9d90af9a5862eb690a51"

  provider3:
    <<: *p
    path: ./proxy/provider3.yaml
    url: "https://s1.byte33.com/api/v1/client/subscribe?token=7db8d83fbb5454d81c7fcf71b70bfe1d"

  provider4:
    <<: *p
    path: ./proxy/provider4.yaml
    url: "https://s.jockerchief.online/v3/subscr?id=17b9b4a54ccd444382f737a87eba7098"

  provider5:
    <<: *p
    path: ./proxy/provider5.yaml
    url: "http://vip.365cloud.me/api/v1/client/subscribe?token=c1de85272bd0979ad5b4ca7afd1f7a86"



mode: rule
ipv6: false
log-level: info
allow-lan: false
mixed-port: 7890
secret: ''
external-controller: 127.0.0.1:9090

geodata-mode: true
geox-url:
  geoip: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"

find-process-mode: strict
global-client-fingerprint: chrome

profile:
  store-selected: true
  store-fake-ip: true

sniffer:
  enable: true
  sniff:
    TLS:
      ports: [443, 8443]
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true

tun:
  enable: true
  stack: gvisor
  dns-hijack:
    - 'any:53'
  auto-route: true
  auto-detect-interface: true

dns:
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*'
    - '+.lan'
    - '+.local'
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 114.114.114.114
  nameserver:
    - 'tls://8.8.4.4#dns'
    - 'tls://1.0.0.1#dns'
    - 'tls://[2001:4860:4860::8844]#dns'
    - 'tls://[2606:4700:4700::1001]#dns'
  fallback: []
  fake-ip-filte:
  - dns.msftncsi.com
  - www.msftncsi.com
  - www.msftconnecttest.com
  proxy-server-nameserver:
    - https://doh.pub/dns-query
  nameserver-policy:
    "geosite:cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query

proxies:
  - name: '美国cdn'
    type: vless
    server: cdn.isgv.me
    port: 443
    uuid: d51f123b-8066-4053-9189-5ef2fe854005
    skip-cert-verify: true
    udp: true
    tls: true
    network: ws
    servername: vps.isgv.me
    ws-opts:
      path: "/d51f123b"
      headers:
        Host: vps.isgv.me
  - name: "hysteria2"
    type: hysteria2
    server: 23.97.65.209
    port: 443
    #  up和down均不写或为0则使用BBR流控
    up: "30 Mbps" # 若不写单位，默认为 Mbps
    down: "350 Mbps" # 若不写单位，默认为 Mbps
    password: 123456
    sni: hy.isgv.me
  - name: "美国hy2"
    type: hysteria2
    server: 23.94.84.40
    port: 443
    #  up和down均不写或为0则使用BBR流控
    up: "50 Mbps" # 若不写单位，默认为 Mbps
    down: "250 Mbps" # 若不写单位，默认为 Mbps
    password: 07211234
    sni: hyhy.isgv.me
  - name: "香港"
    type: vless
    server: 23.97.65.209
    port: 30354
    uuid: eac3bbb3-e085-48f6-ced2-585f8300d98b
    network: tcp
    tls: true
    udp: true
    servername: 23-97-65-209.nip.io
    flow: xtls-rprx-vision 
    client-fingerprint: chrome
    # xudp: true #default
    # skip-cert-verify: true


  # - name: "WARP"
  #   type: wireguard
  #   server: engage.cloudflareclient.com
  #   port: 2408
  #   ip: "172.16.0.2/32"
  #   ipv6: "2606::1/128"        # 自行替换
  #   private-key: "private-key" # 自行替换
  #   public-key: "public-key"   # 自行替换
  #   udp: true
  #   reserved: "abba"           # 自行替换
  #   mtu: 1280
  #   dialer-proxy: "dns"
  #   remote-dns-resolve: true
  #   dns:
  #     - https://dns.cloudflare.com/dns-query

proxy-groups:
  - {name: 🚀 节点选择, type: select, proxies: [海獭, taishan, 一元, 哈基米, 365Cloud, 自建节点, DIRECT]}
  - {name: 🍉Google, <<: *use1, filter: "(?i)美|us|unitedstates|united states", proxies: [DIRECT]}
  - {name: 海獭, <<: *use1}
  - {name: taishan, <<: *use2}
  - {name: 一元, <<: *use3}
  - {name: 哈基米, <<: *use4}
  - {name: 365Cloud, <<: *use5}
  - {name: 自建节点, type: select,  proxies: [香港, 美国cdn, hysteria2, 美国hy2]}
  
rule-providers:
  YouTube:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/YouTube_No_Resolve.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube_No_Resolve.yaml"
    interval: 86400
  YouTubeMusic:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/YouTubeMusic.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTubeMusic/YouTubeMusic.yaml"
    interval: 86400
  Google:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/Google_No_Resolve.yaml
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google_No_Resolve.yaml"
    interval: 86400
  GoogleCNProxyIP:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/GoogleCNProxyIP.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/Ruleset/GoogleCNProxyIP.yaml"
    interval: 86400
  LocalAreaNetwork:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/LocalAreaNetwork.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/LocalAreaNetwork.yaml"
    interval: 86400
  UnBan:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/UnBan.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/UnBan.yaml"
    interval: 86400
  ChinaDomain:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/ChinaDomain.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ChinaDomain.yaml"
    interval: 86400
  ChinaMedia:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/ChinaMedia.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ChinaMedia.yaml"
    interval: 86400
  BanAD:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/BanAD.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanAD.yaml"
    interval: 86400
  BanProgramAD:
    type: http
    behavior: classical
    format: yaml
    path: ./rules/BanProgramAD.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/BanProgramAD.yaml"
    interval: 86400
  ChinaCompanyIp:
    type: http
    behavior: ipcidr
    format: yaml
    path: ./rules/ChinaCompanyIp.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ChinaCompanyIp.yaml"
    interval: 86400
  ChinaIp:
    type: http
    behavior: ipcidr
    format: yaml
    path: ./rules/ChinaIp.yaml
    url: "https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Providers/ChinaIp.yaml"
    interval: 86400


rules:
  # 自己添加的规则
  - DOMAIN,stun.l.google.com,🚀 节点选择
  - DOMAIN-SUFFIX,frp.one,DIRECT
  - DOMAIN-SUFFIX,miyoushe.com,DIRECT
  # 自己添加的规则
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,🚀 节点选择
  - DOMAIN-SUFFIX,services.googleapis.cn,🚀 节点选择
  - RULE-SET,YouTube,🚀 节点选择
  - RULE-SET,YouTubeMusic,🚀 节点选择
  - RULE-SET,Google,🍉Google
  - RULE-SET,GoogleCNProxyIP,🍉Google
  - GEOSITE,google,🍉Google
  - GEOIP,google,🍉Google,no-resolve
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,UnBan,DIRECT
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,ChinaMedia,DIRECT
  - RULE-SET,BanAD,REJECT
  - RULE-SET,BanProgramAD,REJECT
  - RULE-SET,ChinaCompanyIp,DIRECT
  - RULE-SET,ChinaIp,DIRECT
  - GEOSITE,CN,DIRECT
  - GEOIP,CN,DIRECT,no-resolve
  - MATCH,🚀 节点选择
